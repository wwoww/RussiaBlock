window.__require=function t(o,r,i){function s(e,n){if(!r[e]){if(!o[e]){var l=e.split("/");if(l=l[l.length-1],!o[l]){var h="function"==typeof __require&&__require;if(!n&&h)return h(l,!0);if(c)return c(l,!0);throw new Error("Cannot find module '"+e+"'")}e=l}var a=r[e]={exports:{}};o[e][0].call(a.exports,function(t){return s(o[e][1][t]||t)},a,a.exports,t,o,r,i)}return r[e].exports}for(var c="function"==typeof __require&&__require,e=0;e<i.length;e++)s(i[e]);return s}({AudioMgr:[function(t,o,r){"use strict";cc._RF.push(o,"9b684KyTx9Oj530pTcA52VX","AudioMgr");var i,s=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(t,o)},function(t,o){function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__decorate||function(t,o,r,i){var s,c=arguments.length,e=c<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(t,o,r,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(e=(c<3?s(e):c>3?s(o,r,e):s(o,r))||e);return c>3&&e&&Object.defineProperty(o,r,e),e};Object.defineProperty(r,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,l=e.property,h=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.bgm=null,o.eff=null,o.clear_eff=null,o.turn_eff=null,o}return s(o,t),o.prototype.onLoad=function(){},o.prototype.playMusic=function(t){void 0===t&&(t=!0),this.bgm.play()},o.prototype.stopMusic=function(){this.bgm.stop()},o.prototype.pauseMusic=function(){this.bgm.pause()},o.prototype.resumeMusic=function(){this.bgm.resume()},o.prototype.playClearEff=function(){this.eff.clip=this.clear_eff,this.eff.play()},o.prototype.playTurnEff=function(){this.eff.clip=this.turn_eff,this.eff.play()},c([l(cc.AudioSource)],o.prototype,"bgm",void 0),c([l(cc.AudioSource)],o.prototype,"eff",void 0),c([l(cc.AudioClip)],o.prototype,"clear_eff",void 0),c([l(cc.AudioClip)],o.prototype,"turn_eff",void 0),c([n],o)}(cc.Component);r.default=h,cc._RF.pop()},{}],Game:[function(t,o,r){"use strict";cc._RF.push(o,"da20eARyptFLoZBPkgfeQmv","Game");var i,s=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(t,o)},function(t,o){function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__decorate||function(t,o,r,i){var s,c=arguments.length,e=c<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(t,o,r,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(e=(c<3?s(e):c>3?s(o,r,e):s(o,r))||e);return c>3&&e&&Object.defineProperty(o,r,e),e};Object.defineProperty(r,"__esModule",{value:!0});var e=t("./AudioMgr"),n=cc._decorator,l=n.ccclass,h=n.property,a=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.block_Array=[],o.currentBlockCentre=null,o.testBlock=null,o.testBlockCentre=null,o.NextSpr=null,o.audioMgr=null,o.box=[],o.rand=null,o.nextRand=null,o.blockSize=52,o.speed=1,o.score=0,o.scoreTxt=null,o.levelTxt=null,o.currentBlock=null,o.currentBlockPart01=null,o.currentBlockPart02=null,o.currentBlockPart03=null,o.currentBlockPart04=null,o.currentBlockPart01Pos=null,o.currentBlockPart02Pos=null,o.currentBlockPart03Pos=null,o.currentBlockPart04Pos=null,o.gameState=null,o.testBox=[],o.shadowBox=[],o.blockArray=[],o}return s(o,t),o.prototype.InitBox=function(){for(var t=0;t<20;t++){this.box[t]=[],this.testBox[t]=[],this.shadowBox[t]=[];for(var o=0;o<10;o++)this.box[t][o]=null,this.testBox[t][o]=null,this.shadowBox[t][o]=null}this.buildBlock(!0)},o.prototype.buildBlock=function(t){var o=this;void 0===t&&(t=!1);var r=Math.floor(7*Math.random());t?(this.rand=r,this.chooseColor(this.rand),this.chooseType(this.rand),this.nextRand=Math.floor(7*Math.random())):(this.rand=this.nextRand,this.chooseColor(this.rand),this.chooseType(this.rand),this.nextRand=r),cc.loader.loadRes("next/num"+this.nextRand,cc.SpriteFrame,function(t,r){o.NextSpr.spriteFrame=r})},o.prototype.chooseColor=function(t){this.currentBlockPart01=cc.instantiate(this.block_Array[t]),this.currentBlockPart02=cc.instantiate(this.block_Array[t]),this.currentBlockPart03=cc.instantiate(this.block_Array[t]),this.currentBlockPart04=cc.instantiate(this.block_Array[t]),this.currentBlock=cc.instantiate(this.currentBlockCentre),this.node.addChild(this.currentBlock),0==t&&this.currentBlock.setPosition(0,8*this.blockSize),1==t&&this.currentBlock.setPosition(this.blockSize/2,8*this.blockSize+this.blockSize/2),2==t&&this.currentBlock.setPosition(this.blockSize/2,8*this.blockSize+this.blockSize/2),3==t&&this.currentBlock.setPosition(this.blockSize/2,8*this.blockSize+this.blockSize/2),4==t&&this.currentBlock.setPosition(this.blockSize/2,8*this.blockSize+this.blockSize/2),5==t&&this.currentBlock.setPosition(this.blockSize/2,7*this.blockSize+this.blockSize/2),6==t&&this.currentBlock.setPosition(this.blockSize/2,7*this.blockSize+this.blockSize/2),this.currentBlock.addChild(this.currentBlockPart01),this.currentBlock.addChild(this.currentBlockPart02),this.currentBlock.addChild(this.currentBlockPart03),this.currentBlock.addChild(this.currentBlockPart04),this.blockArray.push(this.currentBlock)},o.prototype.chooseType=function(t){0==t&&(this.currentBlockPart01.setPosition(this.blockSize/2,this.blockSize/2),this.currentBlockPart01Pos=cc.v2(18,5),this.currentBlockPart02.setPosition(-this.blockSize/2,this.blockSize/2),this.currentBlockPart02Pos=cc.v2(18,4),this.currentBlockPart03.setPosition(this.blockSize/2,-this.blockSize/2),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(-this.blockSize/2,-this.blockSize/2),this.currentBlockPart04Pos=cc.v2(17,4)),1==t&&(this.currentBlockPart01.setPosition(-this.blockSize,0),this.currentBlockPart01Pos=cc.v2(18,4),this.currentBlockPart02.setPosition(0,0),this.currentBlockPart02Pos=cc.v2(18,5),this.currentBlockPart03.setPosition(0,-this.blockSize),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(this.blockSize,-this.blockSize),this.currentBlockPart04Pos=cc.v2(17,6)),2==t&&(this.currentBlockPart01.setPosition(0,this.blockSize),this.currentBlockPart01Pos=cc.v2(19,5),this.currentBlockPart02.setPosition(0,0),this.currentBlockPart02Pos=cc.v2(18,5),this.currentBlockPart03.setPosition(0,-this.blockSize),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(this.blockSize,-this.blockSize),this.currentBlockPart04Pos=cc.v2(17,6)),3==t&&(this.currentBlockPart01.setPosition(0,this.blockSize),this.currentBlockPart01Pos=cc.v2(19,5),this.currentBlockPart02.setPosition(0,0),this.currentBlockPart02Pos=cc.v2(18,5),this.currentBlockPart03.setPosition(0,-this.blockSize),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(-this.blockSize,-this.blockSize),this.currentBlockPart04Pos=cc.v2(17,4)),4==t&&(this.currentBlockPart01.setPosition(this.blockSize,0),this.currentBlockPart01Pos=cc.v2(18,6),this.currentBlockPart02.setPosition(0,0),this.currentBlockPart02Pos=cc.v2(18,5),this.currentBlockPart03.setPosition(0,-this.blockSize),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(-this.blockSize,-this.blockSize),this.currentBlockPart04Pos=cc.v2(17,4)),5==t&&(this.currentBlockPart01.setPosition(0,2*this.blockSize),this.currentBlockPart01Pos=cc.v2(19,5),this.currentBlockPart02.setPosition(0,this.blockSize),this.currentBlockPart02Pos=cc.v2(18,5),this.currentBlockPart03.setPosition(0,0),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(0,-this.blockSize),this.currentBlockPart04Pos=cc.v2(16,5)),6==t&&(this.currentBlockPart01.setPosition(0,this.blockSize),this.currentBlockPart01Pos=cc.v2(18,5),this.currentBlockPart02.setPosition(-this.blockSize,0),this.currentBlockPart02Pos=cc.v2(17,4),this.currentBlockPart03.setPosition(0,0),this.currentBlockPart03Pos=cc.v2(17,5),this.currentBlockPart04.setPosition(this.blockSize,0),this.currentBlockPart04Pos=cc.v2(17,6)),this.checkCurrentBlockPos()},o.prototype.autoDown=function(){this.unscheduleAllCallbacks(),this.schedule(this.checkAutoDown,1-.1*(this.speed-1))},o.prototype.checkAutoDown=function(){1==this.gameState&&(this.isClashBottom()?(this.deleteRow(),this.buildBlock(),this.audioMgr.playTurnEff()):this.isClashBlockDown()?(this.isGameOver(),this.deleteRow(),this.buildBlock(),this.audioMgr.playTurnEff()):(this.currentBlock.y-=this.blockSize,this.deleteCurrentBlockPos(),this.currentBlockPart01Pos.x-=1,this.currentBlockPart02Pos.x-=1,this.currentBlockPart03Pos.x-=1,this.currentBlockPart04Pos.x-=1,this.checkCurrentBlockPos()))},o.prototype.onUpEvent=function(){this.isClashLeft()||this.isClashRight()||this.isClashBottom()||this.isClashBlockLeft()||this.isClashBlockRight()||this.isClashBlockDown()||(this.deleteCurrentBlockPos(),this.changeShape(),this.checkCurrentBlockPos())},o.prototype.onDownEvent=function(){this.isClashBottom()||this.isClashBlockDown()||(this.currentBlock.y-=this.blockSize,this.deleteCurrentBlockPos(),this.currentBlockPart01Pos.x-=1,this.currentBlockPart02Pos.x-=1,this.currentBlockPart03Pos.x-=1,this.currentBlockPart04Pos.x-=1,this.checkCurrentBlockPos())},o.prototype.onLeftEvent=function(){this.isClashLeft()||this.isClashBlockLeft()||(this.currentBlock.x-=this.blockSize,this.deleteCurrentBlockPos(),this.currentBlockPart01Pos.y-=1,this.currentBlockPart02Pos.y-=1,this.currentBlockPart03Pos.y-=1,this.currentBlockPart04Pos.y-=1,this.checkCurrentBlockPos())},o.prototype.onRightEvent=function(){this.isClashRight()||this.isClashBlockRight()||(this.currentBlock.x+=this.blockSize,this.deleteCurrentBlockPos(),this.currentBlockPart01Pos.y+=1,this.currentBlockPart02Pos.y+=1,this.currentBlockPart03Pos.y+=1,this.currentBlockPart04Pos.y+=1,this.checkCurrentBlockPos())},o.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.left:case cc.macro.KEY.a:this.onLeftEvent();break;case cc.macro.KEY.right:case cc.macro.KEY.d:this.onRightEvent();break;case cc.macro.KEY.up:case cc.macro.KEY.w:this.onUpEvent();break;case cc.macro.KEY.down:case cc.macro.KEY.s:this.onDownEvent();break;case cc.macro.KEY.space:for(;!this.isClashBottom()&&!this.isClashBlockDown();)this.currentBlock.y-=this.blockSize,this.deleteCurrentBlockPos(),this.currentBlockPart01Pos.x-=1,this.currentBlockPart02Pos.x-=1,this.currentBlockPart03Pos.x-=1,this.currentBlockPart04Pos.x-=1,this.checkCurrentBlockPos()}},o.prototype.checkCurrentBlockPos=function(){this.box[this.currentBlockPart01Pos.x][this.currentBlockPart01Pos.y]=this.currentBlockPart01,this.box[this.currentBlockPart02Pos.x][this.currentBlockPart02Pos.y]=this.currentBlockPart02,this.box[this.currentBlockPart03Pos.x][this.currentBlockPart03Pos.y]=this.currentBlockPart03,this.box[this.currentBlockPart04Pos.x][this.currentBlockPart04Pos.y]=this.currentBlockPart04,this.test(),this.showShadow()},o.prototype.deleteCurrentBlockPos=function(){this.box[this.currentBlockPart01Pos.x][this.currentBlockPart01Pos.y]=null,this.box[this.currentBlockPart02Pos.x][this.currentBlockPart02Pos.y]=null,this.box[this.currentBlockPart03Pos.x][this.currentBlockPart03Pos.y]=null,this.box[this.currentBlockPart04Pos.x][this.currentBlockPart04Pos.y]=null,this.test(),this.showShadow()},o.prototype.isClashLeft=function(){return this.currentBlockPart01Pos.y-1<0||this.currentBlockPart02Pos.y-1<0||this.currentBlockPart03Pos.y-1<0||this.currentBlockPart04Pos.y-1<0},o.prototype.isClashRight=function(){return this.currentBlockPart01Pos.y+1>9||this.currentBlockPart02Pos.y+1>9||this.currentBlockPart03Pos.y+1>9||this.currentBlockPart04Pos.y+1>9},o.prototype.isClashBottom=function(){return this.currentBlockPart01Pos.x-1<0||this.currentBlockPart02Pos.x-1<0||this.currentBlockPart03Pos.x-1<0||this.currentBlockPart04Pos.x-1<0},o.prototype.isClashBlockDown=function(){if(null!=this.box[this.currentBlockPart01Pos.x-1][this.currentBlockPart01Pos.y]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart01Pos.x-1][this.currentBlockPart01Pos.y])||null!=this.box[this.currentBlockPart02Pos.x-1][this.currentBlockPart02Pos.y]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart02Pos.x-1][this.currentBlockPart02Pos.y])||null!=this.box[this.currentBlockPart03Pos.x-1][this.currentBlockPart03Pos.y]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart03Pos.x-1][this.currentBlockPart03Pos.y])||null!=this.box[this.currentBlockPart04Pos.x-1][this.currentBlockPart04Pos.y]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart04Pos.x-1][this.currentBlockPart04Pos.y]))return!0},o.prototype.isClashBlockLeft=function(){if(null!=this.box[this.currentBlockPart01Pos.x][this.currentBlockPart01Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart01Pos.x][this.currentBlockPart01Pos.y-1])||null!=this.box[this.currentBlockPart02Pos.x][this.currentBlockPart02Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart02Pos.x][this.currentBlockPart02Pos.y-1])||null!=this.box[this.currentBlockPart03Pos.x][this.currentBlockPart03Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart03Pos.x][this.currentBlockPart03Pos.y-1])||null!=this.box[this.currentBlockPart04Pos.x][this.currentBlockPart04Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart04Pos.x][this.currentBlockPart04Pos.y-1]))return!0},o.prototype.isClashBlockRight=function(){return null!=this.box[this.currentBlockPart01Pos.x][this.currentBlockPart01Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart01Pos.x][this.currentBlockPart01Pos.y+1])||null!=this.box[this.currentBlockPart02Pos.x][this.currentBlockPart02Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart02Pos.x][this.currentBlockPart02Pos.y+1])||null!=this.box[this.currentBlockPart03Pos.x][this.currentBlockPart03Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart03Pos.x][this.currentBlockPart03Pos.y+1])||null!=this.box[this.currentBlockPart04Pos.x][this.currentBlockPart04Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.currentBlockPart04Pos.x][this.currentBlockPart04Pos.y+1])},o.prototype.isCurrentBlockChild=function(t){for(var o=0;o<4;o++)if(t===this.currentBlock.children[o])return!0;return!1},o.prototype.changeShape=function(){this.whichPartChange(this.currentBlockPart01,this.currentBlockPart01Pos),this.whichPartChange(this.currentBlockPart02,this.currentBlockPart02Pos),this.whichPartChange(this.currentBlockPart03,this.currentBlockPart03Pos),this.whichPartChange(this.currentBlockPart04,this.currentBlockPart04Pos)},o.prototype.whichPartChange=function(t,o){cc.log(t.position);var r=Math.abs(t.position.x/this.blockSize),i=Math.abs(t.position.y/this.blockSize),s=Math.max(r,i);0==t.position.x&&t.position.y>0?(o.x-=s,o.y+=s,t.setPosition(t.position.y,t.position.x)):t.position.x<0&&0==t.position.y?(o.x+=s,o.y+=s,t.setPosition(t.position.y,-t.position.x)):0==t.position.x&&t.position.y<0?(o.x+=s,o.y-=s,t.setPosition(t.position.y,t.position.x)):t.position.x>0&&0==t.position.y&&(o.x-=s,o.y-=s,t.setPosition(t.position.y,-t.position.x)),t.position.x>0&&t.position.y>0?(t.position.x>=this.blockSize&&t.position.y>=this.blockSize?o.x-=2:o.x-=1,t.setPosition(t.position.x,-t.position.y)):t.position.x<0&&t.position.y>0?(t.position.x<=-this.blockSize&&t.position.y>=this.blockSize?o.y+=2:o.y+=1,t.setPosition(-t.position.x,t.position.y)):t.position.x<0&&t.position.y<0?(t.position.x<=-this.blockSize&&t.position.y<=-this.blockSize?o.x+=2:o.x+=1,t.setPosition(t.position.x,-t.position.y)):t.position.x>0&&t.position.y<0&&(t.position.x>=this.blockSize&&t.position.y<=-this.blockSize?o.y-=2:o.y-=1,t.setPosition(-t.position.x,t.position.y)),cc.log(t.position)},o.prototype.test=function(){for(var t,o=-this.blockSize/2,r=-this.blockSize/2,i=cc.find("Canvas/test"),s=0;s<20;s++){o+=this.blockSize,r=-this.blockSize/2;for(var c=0;c<10;c++)r+=this.blockSize,null!=this.box[s][c]?(t=0==this.box[s][c].position.x&&0==this.box[s][c].position.y?cc.instantiate(this.testBlockCentre):cc.instantiate(this.testBlock),i.addChild(t),t.setPosition(r,o),this.testBox[s][c]=t):null!=this.testBox[s][c]&&this.testBox[s][c].removeFromParent()}},o.prototype.isShadowClash=function(t,o,r,i){return t-1<0||o-1<0||r-1<0||i-1<0||null!=this.box[t-1][this.currentBlockPart01Pos.y]&&!this.isCurrentBlockChild(this.box[t-1][this.currentBlockPart01Pos.y])||null!=this.box[o-1][this.currentBlockPart02Pos.y]&&!this.isCurrentBlockChild(this.box[o-1][this.currentBlockPart02Pos.y])||null!=this.box[r-1][this.currentBlockPart03Pos.y]&&!this.isCurrentBlockChild(this.box[r-1][this.currentBlockPart03Pos.y])||null!=this.box[i-1][this.currentBlockPart04Pos.y]&&!this.isCurrentBlockChild(this.box[i-1][this.currentBlockPart04Pos.y])},o.prototype.showShadow=function(){for(var t,o=-this.blockSize/2,r=-this.blockSize/2,i=cc.find("Canvas/shadow"),s=this.currentBlockPart01Pos.x,c=this.currentBlockPart02Pos.x,e=this.currentBlockPart03Pos.x,n=this.currentBlockPart04Pos.x,l=[],h=0;h<20;h++){l[h]=[];for(var a=0;a<10;a++)l[h][a]=0}for(h=0;h<20;h++){if(this.isShadowClash(s,c,e,n)){l[s][this.currentBlockPart01Pos.y]=1,l[c][this.currentBlockPart02Pos.y]=1,l[e][this.currentBlockPart03Pos.y]=1,l[n][this.currentBlockPart04Pos.y]=1;break}s-=1,c-=1,e-=1,n-=1}for(h=0;h<20;h++)for(o+=this.blockSize,r=-this.blockSize/2,a=0;a<10;a++)r+=this.blockSize,null!=this.shadowBox[h][a]&&(this.shadowBox[h][a].removeFromParent(),this.shadowBox[h][a]=null),0!=l[h][a]&&(t=cc.instantiate(this.block_Array[this.rand]),i.addChild(t),t.setPosition(r,o),this.shadowBox[h][a]=t)},o.prototype.deleteRow=function(){for(var t=0;t<18;t++){for(var o=0,r=0;r<10;r++)null!=this.box[t][r]&&o++;if(10==o){for(r=0;r<10;r++)this.box[t][r].removeFromParent(),this.box[t][r]=null;this.rowDown(t),t--,this.updateScore(100),this.audioMgr.playClearEff()}}this.clearEmptyBlock()},o.prototype.rowDown=function(t){for(var o=t,r=0;r<10;r++){var i=-1;for(t=o;t<18;t++)i++,null!=this.box[t][r]&&(this.box[t-1][r]=this.box[t][r],this.box[t][r].y-=this.blockSize,null==this.box[t+1][r]&&(this.box[i+o][r]=null))}},o.prototype.isGameOver=function(){for(var t=16;t<20;t++)for(var o=0;o<10;o++)null!=this.box[t][o]&&(this.gameOver(),cc.log("\u6e38\u620f\u7ed3\u675f"))},o.prototype.gameStop=function(){var t=cc.find("Canvas/Box/stop"),o=cc.find("Canvas/Box/on");t.active=!1,o.active=!0,this.gameState=-1,this.enabled=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.audioMgr.pauseMusic()},o.prototype.gameOn=function(){var t=cc.find("Canvas/Box/stop"),o=cc.find("Canvas/Box/on");t.active=!0,o.active=!1,this.gameState=1,this.enabled=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.audioMgr.resumeMusic()},o.prototype.gameOver=function(){0!=this.gameState&&(this.gameState=0,this.enabled=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.audioMgr.stopMusic(),cc.find("Canvas/gameOver").active=!0)},o.prototype.gameStart=function(){cc.find("Canvas/gameOn").active=!1,this.gameState=1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.InitBox(),this.autoDown(),this.audioMgr.playMusic()},o.prototype.gameReStart=function(){this.clearBlock(),cc.find("Canvas/gameOver").active=!1,this.enabled=!0,this.gameState=1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),this.InitBox(),this.autoDown(),this.audioMgr.playMusic()},o.prototype.exitGame=function(){this.clearBlock(),cc.find("Canvas/gameOver").active=!1,cc.find("Canvas/gameOn").active=!0},o.prototype.clearBlock=function(){for(var t=0;t<20;t++)for(var o=0;o<10;o++)this.box[t][o]&&this.box[t][o].removeFromParent(),this.testBox[t][o]&&this.testBox[t][o].removeFromParent(),this.shadowBox[t][o]&&this.shadowBox[t][o].removeFromParent(),this.box[t][o]=null,this.testBox[t][o]=null,this.shadowBox[t][o]=null;for(t=0;t<this.blockArray.length;t++){var r=this.blockArray[t];r.removeAllChildren(!0),r.removeFromParent(!0),r=null}this.blockArray=[]},o.prototype.clearEmptyBlock=function(){for(var t=this.blockArray.length-1;t>=0;t--){var o=this.blockArray[t];0==o.childrenCount&&(this.blockArray.splice(t,1),o.removeFromParent(),o=null)}},o.prototype.updateScore=function(t){this.score+=t,this.scoreTxt&&(this.scoreTxt.string=this.score.toString()),this.score%1e3==0&&(this.speed=Math.floor(this.score/1e3)+1,this.updateLevel())},o.prototype.updateLevel=function(){this.levelTxt&&(this.levelTxt.string=this.speed.toString())},o.prototype.onLoad=function(){this.scoreTxt=cc.find("Canvas/scoreTxt").getComponent(cc.Label),this.levelTxt=cc.find("Canvas/levelTxt").getComponent(cc.Label)},o.prototype.start=function(){},o.prototype.update=function(){},c([h([cc.Prefab])],o.prototype,"block_Array",void 0),c([h(cc.Prefab)],o.prototype,"currentBlockCentre",void 0),c([h(cc.Prefab)],o.prototype,"testBlock",void 0),c([h(cc.Prefab)],o.prototype,"testBlockCentre",void 0),c([h(cc.Sprite)],o.prototype,"NextSpr",void 0),c([h(e.default)],o.prototype,"audioMgr",void 0),c([l],o)}(cc.Component);r.default=a,cc._RF.pop()},{"./AudioMgr":"AudioMgr"}],test:[function(t,o,r){"use strict";cc._RF.push(o,"79f322GXDpKgq1TTcVTDP5H","test");var i,s=this&&this.__extends||(i=function(t,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])})(t,o)},function(t,o){function r(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}),c=this&&this.__decorate||function(t,o,r,i){var s,c=arguments.length,e=c<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(t,o,r,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(e=(c<3?s(e):c>3?s(o,r,e):s(o,r))||e);return c>3&&e&&Object.defineProperty(o,r,e),e};Object.defineProperty(r,"__esModule",{value:!0});var e=cc._decorator,n=e.ccclass,l=(e.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return s(o,t),o.prototype.test=function(){var t=cc.find("Canvas/gameOn/stop"),o=cc.find("Canvas/gameOn/on");1==t.active&&1==o.active?(t.active=!1,o.active=!0):0==t.active&&1==o.active?(t.active=!0,o.active=!1):1==t.active&&0==o.active&&(t.active=!1,o.active=!0)},o.prototype.start=function(){},c([n],o)}(cc.Component));r.default=l,cc._RF.pop()},{}]},{},["AudioMgr","Game","test"]);